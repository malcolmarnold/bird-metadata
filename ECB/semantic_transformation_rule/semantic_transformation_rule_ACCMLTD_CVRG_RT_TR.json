{
  "semantic_transformation_rule_id" : "ACCMLTD_CVRG_RT_TR",
  "transformation_url" : "https://gitlab.sofa.dev/bird-subgroups/bird-transformation-rules/-/blob/main/FinRep%20subgroup/final%20derivation%20rules/ACCMLTD_CVRG_RT/infosheet.md",
  "type_of_transformation" : "D",
  "maintenance_agency_id" : "ECB",
  "name" : "Accumulated coverage ratio derivation rule",
  "code" : "ACCMLTD_CVRG_RT_TR",
  "description" : "This derivation rule aims to obtain the Accumulated coverage ratio from its building blocks.",
  "algorithm" : "SET ACCMLTD_CVRG_RT =\n        CASE\n            WHEN SBJCT_IMPRMNT_INDCTR = 1 \n                AND ACCNTNG_CLSSFCTN IN (14, 45,6, 8,73, 74) \n                THEN ACCMLTD_IMPRMNT/GRSS_CRRYNG_AMNT\n\n            WHEN SBJCT_IMPRMNT_INDCTR = 2 \n                AND PRFRMNG_STTS=1 \n                AND ACCNTNG_CLSSFCTN IN (4,41,47, 7,9) \n                THEN ACCMLTD_CHNGS_FV_CR/GRSS_CRRYNG_AMNT\n    \n            WHEN SBJCT_IMPRMNT_INDCTR = 1 \n                AND ACCNTNG_CLSSFCTN IN (77,76,9)\n                THEN\n                    CASE\n                        WHEN IMPRMNT_STTS=26 THEN ACCMLTD_CVRG_RT = ACCMLTD_IMPRMNT/GRSS_CRRYNG_AMNT\n                        WHEN IMPRMNT_STTS=21 THEN ACCMLTD_CVRG_RT=GNRL_ALLWNCS_BNK_RSK+GNRL_ALLWNCS_CRDT_RSK/GRSS_CRRYNG_AMNT\n                    END\n\n            WHEN SBJCT_IMPRMNT_INDCTR=2 \n                AND PRFRMNG_STTS=1 \n                AND IMPRMNT_STTS=0 \n                THEN ACCMLTD_CHNGS_FV_CR/GRSS_CRRYNG_AMNT\n            \n            ELSE NULL\n        END;",
  "valid_from" : "2024-02-28",
  "valid_to" : "9999-12-31",
  "logical_transformation_rule" : [ {
    "logical_transformation_rule_id" : "DER__BIRD_INSTRMNT_EIL_1__ACCMLTD_CVRG_RT__01_01_1990",
    "semantic_transformation_rule_id" : "ACCMLTD_CVRG_RT_TR",
    "algorithm" : "SET BIRD_INSTRMNT_EIL.ACCMLTD_CVRG_RT =\n        CASE\n            WHEN BIRD_INSTRMNT_RL_IL.SBJCT_IMPRMNT_INDCTR = 1 \n                AND BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (14, 45,6, 8,73, 74) \n                THEN BIRD_INSTRMNT_RL_IL.ACCMLTD_IMPRMNT/BIRD_INSTRMNT_RL_EIL.GRSS_CRRYNG_AMNT\n\n            WHEN BIRD_INSTRMNT_RL_IL.SBJCT_IMPRMNT_INDCTR = 2 \n                AND BIRD_PRTY_IL.PRFRMNG_STTS=1 \n                AND BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (4,41,47, 7,9) \n                THEN BIRD_INSTRMNT_RL_IL.ACCMLTD_CHNGS_FV_CR/BIRD_INSTRMNT_RL_EIL.GRSS_CRRYNG_AMNT\n    \n            WHEN BIRD_INSTRMNT_RL_IL.SBJCT_IMPRMNT_INDCTR = 1 \n                AND BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (77,76,9)\n                THEN\n                    CASE\n                        WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS=26 THEN BIRD_INSTRMNT_RL_IL.ACCMLTD_CVRG_RT = BIRD_INSTRMNT_RL_IL.ACCMLTD_IMPRMNT/BIRD_INSTRMNT_RL_EIL.GRSS_CRRYNG_AMNT\n                        WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS=21 THEN BIRD_INSTRMNT_RL_IL.ACCMLTD_CVRG_RT=BIRD_INSTRMNT_RL_IL.GNRL_ALLWNCS_BNK_RSK+BIRD_INSTRMNT_RL_IL.GNRL_ALLWNCS_CRDT_RSK/BIRD_INSTRMNT_RL_EIL.GRSS_CRRYNG_AMNT\n                    END\n\n            WHEN BIRD_INSTRMNT_RL_IL.SBJCT_IMPRMNT_INDCTR=2 \n                AND BIRD_PRTY_IL.PRFRMNG_STTS=1 \n                AND BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS=0 \n                THEN BIRD_INSTRMNT_RL_IL.ACCMLTD_CHNGS_FV_CR/BIRD_INSTRMNT_RL_EIL.GRSS_CRRYNG_AMNT\n            \n            ELSE NULL\n        END;",
    "additional_filters" : null,
    "source_layer" : "IL",
    "destination_layer" : "EIL",
    "transformation_type" : "DER",
    "valid_from" : "1990-01-01",
    "valid_to" : "9999-12-31"
  }, {
    "logical_transformation_rule_id" : "DER__BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL_1__ACCMLTD_CVRG_RT__01_01_1990",
    "semantic_transformation_rule_id" : "ACCMLTD_CVRG_RT_TR",
    "algorithm" : "SET BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.ACCMLTD_CVRG_RT =\n        CASE\n            WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.SBJCT_IMPRMNT_INDCTR = 1 \n                AND BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (14, 45,6, 8,73, 74) \n                THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_IMPRMNT/BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.GRSS_CRRYNG_AMNT\n\n            WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.SBJCT_IMPRMNT_INDCTR = 2 \n                AND BIRD_PRTY_IL.PRFRMNG_STTS=1 \n                AND BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (4,41,47, 7,9) \n                THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_CHNGS_FV_CR/BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.GRSS_CRRYNG_AMNT\n    \n            WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.SBJCT_IMPRMNT_INDCTR = 1 \n                AND BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (77,76,9)\n                THEN\n                    CASE\n                        WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS=26 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_CVRG_RT = BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_IMPRMNT/BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.GRSS_CRRYNG_AMNT\n                        WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS=21 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_CVRG_RT=BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.GNRL_ALLWNCS_BNK_RSK+BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.GNRL_ALLWNCS_CRDT_RSK/BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.GRSS_CRRYNG_AMNT\n                    END\n\n            WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.SBJCT_IMPRMNT_INDCTR=2 \n                AND BIRD_PRTY_IL.PRFRMNG_STTS=1 \n                AND BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS=0 \n                THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_CHNGS_FV_CR/BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.GRSS_CRRYNG_AMNT\n            \n            ELSE NULL\n        END;",
    "additional_filters" : null,
    "source_layer" : "IL",
    "destination_layer" : "EIL",
    "transformation_type" : "DER",
    "valid_from" : "1990-01-01",
    "valid_to" : "9999-12-31"
  } ]
}