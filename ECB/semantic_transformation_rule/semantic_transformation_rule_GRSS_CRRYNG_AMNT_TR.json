{
  "semantic_transformation_rule_id" : "GRSS_CRRYNG_AMNT_TR",
  "transformation_url" : "https://gitlab.sofa.dev/bird-subgroups/bird-transformation-rules/-/blob/main/FinRep%20subgroup/final%20derivation%20rules/GRSS_CRRYNG_AMNT/infosheet.md",
  "type_of_transformation" : "D",
  "maintenance_agency_id" : "ECB",
  "name" : "Gross carrying amount derivation rule",
  "code" : "GRSS_CRRYNG_AMNT_TR",
  "description" : "This derivation rule aims to obtain the Gross carrying amount from its building blocks.",
  "algorithm" : "SET GRSS_CRRYNG_AMNT = CASE WHEN ACCNTNG_CLSSFCTN IN (4, 41, 47, 7) THEN CASE WHEN PRFRMNG_STTS = 11 THEN FV WHEN PRFRMNG_STTS = 1 THEN FV + ACCMLTD_CHNGS_FV_CR END WHEN ACCNTNG_CLSSFCTN IN (6, 8, 9) THEN CRRYNG_AMNT + ACCMLTD_IMPRMNT WHEN ACCNTNG_CLSSFCTN = 77 THEN CASE WHEN IMPRMNT_STTS = 26 THEN CRRYNG_AMNT + ACCMLTD_IMPRMNT WHEN IMPRMNT_STTS = 211 THEN CRRYNG_AMNT + GNRL_ALLWNCS_CRDT_RSK WHEN IMPRMNT_STTS = 212 THEN CRRYNG_AMNT + GNRL_ALLWNCS_BNK_RSK END WHEN ACCNTNG_CLSSFCTN = 9 THEN CASE WHEN SBJCT_IMPRMNT_INDCTR = 1 THEN CASE WHEN IMPRMNT_STTS = 26 THEN CRRYNG_AMNT + ACCMLTD_IMPRMNT WHEN IMPRMNT_STTS = 211 THEN CRRYNG_AMNT + GNRL_ALLWNCS_CRDT_RSK WHEN IMPRMNT_STTS = 212 THEN CRRYNG_AMNT + GNRL_ALLWNCS_BNK_RSK END WHEN SBJCT_IMPRMNT_INDCTR = 2 THEN CASE WHEN PRFRMNG_STTS = 11 THEN FV WHEN PRFRMNG_STTS = 1 THEN FV + ACCMLTD_CHNGS_FV_CR END END WHEN ACCNTNG_CLSSFCTN IN (76, 73) THEN CRRYNG_AMNT WHEN ACCNTNG_CLSSFCTN = 74 THEN CRRYNG_AMNT + ACCMLTD_IMPRMNT WHEN ACCNTNG_CLSSFCTN IN (2, 3) THEN FV END;",
  "valid_from" : "2024-02-28",
  "valid_to" : "9999-12-31",
  "logical_transformation_rule" : [ {
    "logical_transformation_rule_id" : "DER__BIRD_INSTRMNT_RL_EIL_1__GRSS_CRRYNG_AMNT__01_01_1990",
    "semantic_transformation_rule_id" : "GRSS_CRRYNG_AMNT_TR",
    "algorithm" : "SET BIRD_INSTRMNT_RL_EIL.GRSS_CRRYNG_AMNT = CASE WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (4, 41, 47, 7) THEN CASE WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 11 THEN BIRD_INSTRMNT_RL_IL.FV WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 1 THEN BIRD_INSTRMNT_RL_IL.FV + BIRD_INSTRMNT_RL_IL.ACCMLTD_CHNGS_FV_CR END WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (6, 8, 9) THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.ACCMLTD_IMPRMNT WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN = 77 THEN CASE WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS = 26 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.ACCMLTD_IMPRMNT WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS = 211 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.GNRL_ALLWNCS_CRDT_RSK WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS = 212 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.GNRL_ALLWNCS_BNK_RSK END WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN = 9 THEN CASE WHEN BIRD_INSTRMNT_RL_IL.SBJCT_IMPRMNT_INDCTR = 1 THEN CASE WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS = 26 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.ACCMLTD_IMPRMNT WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS = 211 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.GNRL_ALLWNCS_CRDT_RSK WHEN BIRD_INSTRMNT_RL_IL.IMPRMNT_STTS = 212 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.GNRL_ALLWNCS_BNK_RSK END WHEN BIRD_INSTRMNT_RL_IL.SBJCT_IMPRMNT_INDCTR = 2 THEN CASE WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 11 THEN BIRD_INSTRMNT_RL_IL.FV WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 1 THEN BIRD_INSTRMNT_RL_IL.FV + BIRD_INSTRMNT_RL_IL.ACCMLTD_CHNGS_FV_CR END END WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (76, 73) THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN = 74 THEN BIRD_INSTRMNT_RL_IL.CRRYNG_AMNT + BIRD_INSTRMNT_RL_IL.ACCMLTD_IMPRMNT WHEN BIRD_INSTRMNT_RL_IL.ACCNTNG_CLSSFCTN IN (2, 3) THEN BIRD_SCRTY_PSTN_IL.FV END;",
    "additional_filters" : null,
    "source_layer" : "IL",
    "destination_layer" : "EIL",
    "transformation_type" : "DER",
    "valid_from" : "1990-01-01",
    "valid_to" : "9999-12-31"
  }, {
    "logical_transformation_rule_id" : "DER__BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL_1__GRSS_CRRYNG_AMNT__01_01_1990",
    "semantic_transformation_rule_id" : "GRSS_CRRYNG_AMNT_TR",
    "algorithm" : "SET BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_EIL.GRSS_CRRYNG_AMNT = CASE WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (4, 41, 47, 7) THEN CASE WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 11 THEN BIRD_SCRTY_PSTN_IL.FV WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 1 THEN BIRD_SCRTY_PSTN_IL.FV + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_CHNGS_FV_CR END WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (6, 8, 9) THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_IMPRMNT WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN = 77 THEN CASE WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS = 26 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_IMPRMNT WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS = 211 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.GNRL_ALLWNCS_CRDT_RSK WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS = 212 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.GNRL_ALLWNCS_BNK_RSK END WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN = 9 THEN CASE WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.SBJCT_IMPRMNT_INDCTR = 1 THEN CASE WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS = 26 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_IMPRMNT WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS = 211 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.GNRL_ALLWNCS_CRDT_RSK WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.IMPRMNT_STTS = 212 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.GNRL_ALLWNCS_BNK_RSK END WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.SBJCT_IMPRMNT_INDCTR = 2 THEN CASE WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 11 THEN BIRD_SCRTY_PSTN_IL.FV WHEN BIRD_PRTY_IL.PRFRMNG_STTS = 1 THEN BIRD_SCRTY_PSTN_IL.FV + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_CHNGS_FV_CR END END WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (76, 73) THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN = 74 THEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.CRRYNG_AMNT + BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCMLTD_IMPRMNT WHEN BIRD_LNG_SCRTY_PSTN_PRDNTL_PRTFL_ASSGNMNT_ACCNTNG_CLSSFCTN_FNNCL_ASSTS_ASSGNMNT_IL.ACCNTNG_CLSSFCTN IN (2, 3) THEN BIRD_SCRTY_PSTN_IL.FV END;",
    "additional_filters" : null,
    "source_layer" : "IL",
    "destination_layer" : "EIL",
    "transformation_type" : "DER",
    "valid_from" : "1990-01-01",
    "valid_to" : "9999-12-31"
  } ]
}